module.exports = function afterInsertSaveSet( result, db, args ) {

    return new Promise( resolve => {

        if ( !result )
            return resolve( result );

        if ( !Array.isArray( result.ops ) ) {

            if ( result.value && typeof result.value === 'object' && result.value._id)
                return resolve( result.value );

            if ( args.length && args[ 0 ]._id ) {
                db.findOne( {
                    _id: args[ 0 ]._id
                }, {}, ( err, res ) => resolve( res ) );
            }

            return resolve( result );

        }

        if ( result.ops.length == 1 )
            return resolve( result.ops[ 0 ] );

        return resolve( result.ops );

    } );

};
