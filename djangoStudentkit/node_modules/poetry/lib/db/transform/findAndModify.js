module.exports = function transformFindAndModify( args ) {

    if ( args.length == 1 ) {
        let query = args[ 0 ].query || {},
            sort = args[ 0 ].sort || {},
            update = args[ 0 ].update || {};

        let options = args[ 0 ];
        delete options.query;
        delete options.sort;
        delete options.update;

        args = [
            query,
            sort,
            update,
            options
        ];
    }

    if ( args.length >= 3 && typeof args[ 2 ] === 'object' && args[ 2 ].$set ) {
        args[ 2 ].$set.updatedAt = new Date();
    }

    return args;

};
